{"name":"Set Elevation Pixels","type":"script","author":"nx29hoGineoQv9Bs","img":"icons/svg/wall-direction.svg","scope":"global","command":"if ( !canvas.elevation ) ui.notifications.error(\"Elevated Vision module must be loaded.\");\n\nnew Dialog({\n  title: \"Set Elevation Pixels\",\n  content: `<form>\n  <div class=\"form-group\"> <label>From Elevation</label> <div class=\"form-fields\"> <input type=\"number\" id=\"fromelevation\" value=\"${canvas.elevation.elevationMin}\" step=\"${canvas.elevation.elevationStep}\"> </div> </div>\n  <div class=\"form-group\"> <label>To Elevation</label> <div class=\"form-fields\"> <input type=\"number\" id=\"toelevation\" value=\"${canvas.elevation.elevationMin}\" step=\"${canvas.elevation.elevationStep}\"> </div> </div>\n  <p class=\"notes\">This macro will change the elevation value of every pixel currently equal to the \"from\" elevation value to the \"to\" elevation value in this scene. This cannot be undone.</p>\n  </form>`,\n  buttons: {\n    yes: {\n      icon: `<i class=\"fas fa-arrow-up-right-dots\"></i>`,\n      label: \"Change\",\n      callback: async (html) => {\n        const fromElevation = parseFloat(html[0].querySelector(\"#fromelevation\").value) ?? canvas.elevation.elevationMin;\n        const toElevation = parseFloat(html[0].querySelector(\"#toelevation\").value) ?? fromElevation;\n        \n        canvas.elevation.changePixelElevationValues(fromElevation, toElevation);\n        return ui.notifications.notify(`Changed elevation pixel values from ${fromElevation} to ${toElevation}`);\n      }\n    },\n    \n    no: {\n      icon: \"<i class='fas fa-times'></i>\",\n      label: \"Cancel\"\n    }\n  }\n}).render(true);","flags":{"core":{"sourceId":"Macro.RcvS9pfWOOxEXU21"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1665366587253,"modifiedTime":1665366642623,"lastModifiedBy":"nx29hoGineoQv9Bs"},"folder":null,"sort":0,"ownership":{"default":0,"nx29hoGineoQv9Bs":3},"_id":"wC7IjIRlAMh4cwLK"}
{"name":"Set Tokens on Ground","type":"script","scope":"global","author":"nx29hoGineoQv9Bs","img":"icons/svg/direction.svg","command":"const groundFn = canvas.elevation.tokens.tokenGroundElevation;\nconst updates = canvas.tokens.controlled.map(token => {\n  const groundE = groundFn(token);\n  return { _id: token.id, elevation: groundE };\n});\nawait canvas.scene.updateEmbeddedDocuments(\"Token\",updates);","ownership":{"default":0,"nx29hoGineoQv9Bs":3},"flags":{"core":{"sourceId":"Macro.nmLeQcKhCraX3fjO"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668630800474,"modifiedTime":1677003617435,"lastModifiedBy":"nx29hoGineoQv9Bs"},"folder":null,"sort":0,"_id":"9glL8s58cCxP6mSt"}
{"name":"Set Tokens on Terrain","type":"script","scope":"global","author":"nx29hoGineoQv9Bs","img":"icons/svg/direction.svg","command":"const groundFn = canvas.elevation.tokens.tokenTerrainElevation;\nconst updates = canvas.tokens.controlled.map(token => {\n  const groundE = groundFn(token);\n  return { _id: token.id, elevation: groundE };\n});\nawait canvas.scene.updateEmbeddedDocuments(\"Token\",updates);","ownership":{"default":0,"nx29hoGineoQv9Bs":3},"flags":{"core":{"sourceId":"Macro.SHlhtpiYRJZWAzI5"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668630800474,"modifiedTime":1677003619068,"lastModifiedBy":"nx29hoGineoQv9Bs"},"folder":null,"sort":0,"_id":"kVUYWZRqlmDhRpkc"}
